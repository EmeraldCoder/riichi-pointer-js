<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Riichi Mahjong Pointer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="layout">
        <h1>Riichi Mahjong Pointer</h1>
        
        <div data-bind="{visible: currentView() === 'TileSuitSelection'}">
            <h2>Select type tile type of the combinaison to add to your hand</h2>

            <input type="button" value="Dragon" data-bind="{click: selectDragonSuit, visible: addType() !== 'chii'}" />
            <input type="button" value="Wind" data-bind="{click: selectWindSuit, visible: addType() !== 'chii'}" />
            <input type="button" value="Dot" data-bind="{click: selectDotSuit}" />
            <input type="button" value="Bamboo" data-bind="{click: selectBambooSuit}" />
            <input type="button" value="Character" data-bind="{click: selectCharacterSuit}" />    
        </div>
        
        <div data-bind="{visible: currentView() === 'TileValueSelection'}">
            <h2>Select the value of the tile of the combinaison to add to your hand</h2>
            
            <div data-bind="{visible: addSuit() === 'dragon'}">
                <input type="button" value="Green" data-bind="{click: selectGreenValue}" />
                <input type="button" value="Red" data-bind="{click: selectRedValue}" />
                <input type="button" value="White" data-bind="{click: selectWhiteValue}" />
            </div>
            <div data-bind="{visible: addSuit() === 'wind'}">
                <input type="button" value="East" data-bind="{click: selectEastValue}" />
                <input type="button" value="South" data-bind="{click: selectSouthValue}" />
                <input type="button" value="West" data-bind="{click: selectWestValue}" />
                <input type="button" value="North" data-bind="{click: selectNorthValue}" />
            </div>
            <div data-bind="{visible: addSuit() !== 'dragon' && addSuit() !== 'wind'}">
                <input type="button" value="1" data-bind="{click: select1Value}" />
                <input type="button" value="2" data-bind="{click: select2Value}" />
                <input type="button" value="3" data-bind="{click: select3Value}" />
                <input type="button" value="4" data-bind="{click: select4Value}" />
                <input type="button" value="5" data-bind="{click: select5Value}" />
                <input type="button" value="6" data-bind="{click: select6Value}" />
                <input type="button" value="7" data-bind="{click: select7Value}" />
                <input type="button" value="8" data-bind="{click: select8Value, visible: addType() !== 'chii'}" />
                <input type="button" value="9" data-bind="{click: select9Value, visible: addType() !== 'chii'}" />
            </div>
        </div>

        <div data-bind="{visible: currentView() === 'Main'}">
            <h2>Your hand</h2>

            <div style="margin: 10px 0;">
                <fieldset>
                    <legend>Winning type</legend>
                    <select data-bind="{value: winningType}">
                        <option value="tsumo">Tsumo</option>
                        <option value="ron">Ron</option>
                    </select>
                    <select data-bind="{value: winningSecondaryType}">
                        <option></option>
                        <option value="haitei raoyue">Haitei Raoyue</option>
                        <option value="houtei raoyui">Houtei Raoyui</option>
                        <option value="rinshan kaihou">Rinshan Kaihou</option>
                        <option value="chan kan">Chan Kan</option>
                    </select>
                </fieldset>
            </div>
            
            <div style="margin: 10px 0;">
                <fieldset>
                    <legend>Winds</legend>
                    
                    <div style="display: inline-block;">
                        <label>Prevalent: </label>
                        <select data-bind="{value: prevalentWind}">
                            <option value="east">East</option>
                            <option value="south">South</option>
                            <option value="west">West</option>
                            <option value="north">North</option>
                        </select>
                    </div>
                    
                    <div style="display: inline-block;">
                        <label>Seat: </label>
                        <select data-bind="{value: seatWind}">
                            <option value="east">East</option>
                            <option value="south">South</option>
                            <option value="west">West</option>
                            <option value="north">North</option>
                        </select>
                    </div>
                </fieldset>
            </div>
            
            <div style="margin: 10px 0;">
                <fieldset>
                    <legend>Riichi</legend>
                    <input type="checkbox" id="IsRiichi" data-bind="{checked: isRiichi}" /><label for="IsRiichi">Riichi</label>
                    <input type="checkbox" id="IsDoubleRiichi" data-bind="{checked: isDoubleRiichi}" /><label for="IsDoubleRiichi">Double Riichi</label>
                    <input type="checkbox" id="IsIppatsu" data-bind="{checked: isIppatsu}" /><label for="IsIppatsu">Ippatsu</label>
                </fieldset>
            </div>
            
            <div style="margin: 10px 0;">
                <fieldset>
                    <legend>Concealed combinaisons</legend>
                    <div data-bind="{visible: !handIsFinish()}">
                        <input type="button" value="+ Pair" data-bind="{click: addConcealedPair}" />
                        <input type="button" value="+ Pon" data-bind="{click: addConcealedPon}" />
                        <input type="button" value="+ Kan" data-bind="{click: addConcealedKan}" />
                        <input type="button" value="+ Chii" data-bind="{click: addConcealedChii}" />
                    </div>
                    <div class="box" style="margin-top: 10px;" data-bind="{html: refreshConcealedHandTiles}">
                    </div>
                </fieldset>
            </div>
            
            <div style="margin: 10px 0;">
                <fieldset>
                    <legend>Open combinaisons</legend>
                    <div data-bind="{visible: !handIsFinish()}">
                        <input type="button" value="+ Pon" data-bind="{click: addOpenPon}" />
                        <input type="button" value="+ Kan" data-bind="{click: addOpenKan}" />
                        <input type="button" value="+ Chii" data-bind="{click: addOpenChii}" />
                    </div>
                    <div class="box" style="margin-top: 10px;" data-bind="{html: refreshOpenHandTiles}">
                    </div>
                </fieldset>
            </div>
            
            <div>
                <input type="button" value="Calculate hand points" data-bind="{click: showPoints, visible: handIsFinish}" />
            </div>
        </div>
        
        <div data-bind="{visible: currentView() === 'Result'}">
            <h2>Your hand points</h2>
            <div style="margin-bottom: 20px">
                <input type="button" value="back to your hand" data-bind="click: returnToMain" />
            </div>
            <div class="box" style="margin: 20px 0;">
                <p data-bind="html: pointsTotal"></p>
            
                <p><b>Han:</b> <span data-bind="html: pointsYakuTotal"></span> / <b>Fu:</b> <span data-bind="html: pointsFuTotal"></span></p>
                
                <b>Han details</b><br />
                <table>
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Han value</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: pointsYakuDetails">
                        <tr>
                            <td data-bind="html: name"></td>
                            <td data-bind="html: value"></td>
                        </tr>
                    </tbody>
                </table>
                
                <br /><b>Fu details</b><br />
                <table>
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Fu value</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: pointsFuDetails">
                        <tr>
                            <td data-bind="html: name"></td>
                            <td data-bind="html: value"></td>
                        </tr>
                    </tbody>
                </table>
            
            </div>
        </div>
    </div>

    <script src="knockout-2.3.0.js"></script>
    <script src="src/tile-classes.js"></script>    
    <script src="src/hand-classes.js"></script>
    <script src="src/yakupattern-classes.js"></script>
    <script src="src/pointer-classes.js"></script>
    <script src="app.js"></script>
</body>
</html>
