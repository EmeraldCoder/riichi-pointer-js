<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Riichi Mahjong Pointer</title>
</head>
<body>
    <h1>Riichi Mahjong Pointer</h1>

    <div style="margin: 10px;">
        <label>Prevalent wind: </label>
        <select id="PrevalentWind">
            <option value="east">East</option>
            <option value="south">South</option>
            <option value="west">West</option>
            <option value="north">North</option>
        </select>
        
        <label>Seat wind: </label>
        <select id="SeatWind">
            <option value="east">East</option>
            <option value="south">South</option>
            <option value="west">West</option>
            <option value="north">North</option>
        </select>
    </div>

    <div><b>Your hands</b></div>
    <div id="HandTiles" style="border: 1px solid #000; padding: 10px;"></div>

    <div style="margin: 10px;">
        <div>
            <input type="button" value="Green Dragon Pon" onclick="addCombinaison('pon', 'dragon', 'green')" />
            <input type="button" value="Red Dragon Pon" onclick="addCombinaison('pon', 'dragon', 'red')" />
            <input type="button" value="White Dragon Pon" onclick="addCombinaison('pon', 'dragon', 'white')" />
        </div>
        <div>
            <input type="button" value="East Wind Pon" onclick="addCombinaison('pon', 'wind', 'east')" />
            <input type="button" value="South Wind Pon" onclick="addCombinaison('pon', 'wind', 'south')" />
            <input type="button" value="West Wind Pon" onclick="addCombinaison('pon', 'wind', 'west')" />
            <input type="button" value="North Wind Pon" onclick="addCombinaison('pon', 'wind', 'north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Pon" onclick="addCombinaison('pon', 'dot', 1)" />
            <input type="button" value="2 Dot Pon" onclick="addCombinaison('pon', 'dot', 2)" />
            <input type="button" value="3 Dot Pon" onclick="addCombinaison('pon', 'dot', 3)" />
            <input type="button" value="4 Dot Pon" onclick="addCombinaison('pon', 'dot', 4)" />
            <input type="button" value="5 Dot Pon" onclick="addCombinaison('pon', 'dot', 5)" />
            <input type="button" value="6 Dot Pon" onclick="addCombinaison('pon', 'dot', 6)" />
            <input type="button" value="7 Dot Pon" onclick="addCombinaison('pon', 'dot', 7)" />
            <input type="button" value="8 Dot Pon" onclick="addCombinaison('pon', 'dot', 8)" />
            <input type="button" value="9 Dot Pon" onclick="addCombinaison('pon', 'dot', 9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 1)" />
            <input type="button" value="2 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 2)" />
            <input type="button" value="3 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 3)" />
            <input type="button" value="4 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 4)" />
            <input type="button" value="5 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 5)" />
            <input type="button" value="6 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 6)" />
            <input type="button" value="7 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 7)" />
            <input type="button" value="8 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 8)" />
            <input type="button" value="9 Bamboo Pon" onclick="addCombinaison('pon', 'bamboo', 9)" />
        </div>
        <div>
            <input type="button" value="1 Character Pon" onclick="addCombinaison('pon', 'character', 1)" />
            <input type="button" value="2 Character Pon" onclick="addCombinaison('pon', 'character', 2)" />
            <input type="button" value="3 Character Pon" onclick="addCombinaison('pon', 'character', 3)" />
            <input type="button" value="4 Character Pon" onclick="addCombinaison('pon', 'character', 4)" />
            <input type="button" value="5 Character Pon" onclick="addCombinaison('pon', 'character', 5)" />
            <input type="button" value="6 Character Pon" onclick="addCombinaison('pon', 'character', 6)" />
            <input type="button" value="7 Character Pon" onclick="addCombinaison('pon', 'character', 7)" />
            <input type="button" value="8 Character Pon" onclick="addCombinaison('pon', 'character', 8)" />
            <input type="button" value="9 Character Pon" onclick="addCombinaison('pon', 'character', 9)" />
        </div>
        <div>
            <input type="button" value="Green Dragon Kan" onclick="addCombinaison('kan', 'dragon', 'green')" />
            <input type="button" value="Red Dragon Kan" onclick="addCombinaison('kan', 'dragon', 'red')" />
            <input type="button" value="White Dragon Kan" onclick="addCombinaison('kan', 'dragon', 'white')" />
        </div>
        <div>
            <input type="button" value="East Wind Kan" onclick="addCombinaison('kan', 'wind', 'east')" />
            <input type="button" value="South Wind Kan" onclick="addCombinaison('kan', 'wind', 'south')" />
            <input type="button" value="West Wind Kan" onclick="addCombinaison('kan', 'wind', 'west')" />
            <input type="button" value="North Wind Kan" onclick="addCombinaison('kan', 'wind', 'north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Kan" onclick="addCombinaison('kan', 'dot', 1)" />
            <input type="button" value="2 Dot Kan" onclick="addCombinaison('kan', 'dot', 2)" />
            <input type="button" value="3 Dot Kan" onclick="addCombinaison('kan', 'dot', 3)" />
            <input type="button" value="4 Dot Kan" onclick="addCombinaison('kan', 'dot', 4)" />
            <input type="button" value="5 Dot Kan" onclick="addCombinaison('kan', 'dot', 5)" />
            <input type="button" value="6 Dot Kan" onclick="addCombinaison('kan', 'dot', 6)" />
            <input type="button" value="7 Dot Kan" onclick="addCombinaison('kan', 'dot', 7)" />
            <input type="button" value="8 Dot Kan" onclick="addCombinaison('kan', 'dot', 8)" />
            <input type="button" value="9 Dot Kan" onclick="addCombinaison('kan', 'dot', 9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 1)" />
            <input type="button" value="2 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 2)" />
            <input type="button" value="3 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 3)" />
            <input type="button" value="4 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 4)" />
            <input type="button" value="5 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 5)" />
            <input type="button" value="6 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 6)" />
            <input type="button" value="7 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 7)" />
            <input type="button" value="8 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 8)" />
            <input type="button" value="9 Bamboo Kan" onclick="addCombinaison('kan', 'bamboo', 9)" />
        </div>
        <div>
            <input type="button" value="1 Character Kan" onclick="addCombinaison('kan', 'character', 1)" />
            <input type="button" value="2 Character Kan" onclick="addCombinaison('kan', 'character', 2)" />
            <input type="button" value="3 Character Kan" onclick="addCombinaison('kan', 'character', 3)" />
            <input type="button" value="4 Character Kan" onclick="addCombinaison('kan', 'character', 4)" />
            <input type="button" value="5 Character Kan" onclick="addCombinaison('kan', 'character', 5)" />
            <input type="button" value="6 Character Kan" onclick="addCombinaison('kan', 'character', 6)" />
            <input type="button" value="7 Character Kan" onclick="addCombinaison('kan', 'character', 7)" />
            <input type="button" value="8 Character Kan" onclick="addCombinaison('kan', 'character', 8)" />
            <input type="button" value="9 Character Kan" onclick="addCombinaison('kan', 'character', 9)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Dot Chii" onclick="addCombinaison('chii', 'dot', 1)" />
            <input type="button" value="2,3,4 Dot Chii" onclick="addCombinaison('chii', 'dot', 2)" />
            <input type="button" value="3,4,5 Dot Chii" onclick="addCombinaison('chii', 'dot', 3)" />
            <input type="button" value="4,5,6 Dot Chii" onclick="addCombinaison('chii', 'dot', 4)" />
            <input type="button" value="5,6,7 Dot Chii" onclick="addCombinaison('chii', 'dot', 5)" />
            <input type="button" value="6,7,8 Dot Chii" onclick="addCombinaison('chii', 'dot', 6)" />
            <input type="button" value="7,8,9 Dot Chii" onclick="addCombinaison('chii', 'dot', 7)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 1)" />
            <input type="button" value="2,3,4 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 2)" />
            <input type="button" value="3,4,5 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 3)" />
            <input type="button" value="4,5,6 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 4)" />
            <input type="button" value="5,6,7 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 5)" />
            <input type="button" value="6,7,8 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 6)" />
            <input type="button" value="7,8,9 Bamboo Chii" onclick="addCombinaison('chii', 'bamboo', 7)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Character Chii" onclick="addCombinaison('chii', 'character', 1)" />
            <input type="button" value="2,3,4 Character Chii" onclick="addCombinaison('chii', 'character', 2)" />
            <input type="button" value="3,4,5 Character Chii" onclick="addCombinaison('chii', 'character', 3)" />
            <input type="button" value="4,5,6 Character Chii" onclick="addCombinaison('chii', 'character', 4)" />
            <input type="button" value="5,6,7 Character Chii" onclick="addCombinaison('chii', 'character', 5)" />
            <input type="button" value="6,7,8 Character Chii" onclick="addCombinaison('chii', 'character', 6)" />
            <input type="button" value="7,8,9 Character Chii" onclick="addCombinaison('chii', 'character', 7)" />
        </div>
        <div>
            <input type="button" value="Green Dragon Pair" onclick="addCombinaison('pair', 'dragon', 'green')" />
            <input type="button" value="Red Dragon Pair" onclick="addCombinaison('pair', 'dragon', 'red')" />
            <input type="button" value="White Dragon Pair" onclick="addCombinaison('pair', 'dragon', 'white')" />
        </div>
        <div>
            <input type="button" value="East Wind Pair" onclick="addCombinaison('pair', 'wind', 'east')" />
            <input type="button" value="South Wind Pair" onclick="addCombinaison('pair', 'wind', 'south')" />
            <input type="button" value="West Wind Pair" onclick="addCombinaison('pair', 'wind', 'west')" />
            <input type="button" value="North Wind Pair" onclick="addCombinaison('pair', 'wind', 'north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Pair" onclick="addCombinaison('pair', 'dot', 1)" />
            <input type="button" value="2 Dot Pair" onclick="addCombinaison('pair', 'dot', 2)" />
            <input type="button" value="3 Dot Pair" onclick="addCombinaison('pair', 'dot', 3)" />
            <input type="button" value="4 Dot Pair" onclick="addCombinaison('pair', 'dot', 4)" />
            <input type="button" value="5 Dot Pair" onclick="addCombinaison('pair', 'dot', 5)" />
            <input type="button" value="6 Dot Pair" onclick="addCombinaison('pair', 'dot', 6)" />
            <input type="button" value="7 Dot Pair" onclick="addCombinaison('pair', 'dot', 7)" />
            <input type="button" value="8 Dot Pair" onclick="addCombinaison('pair', 'dot', 8)" />
            <input type="button" value="9 Dot Pair" onclick="addCombinaison('pair', 'dot', 9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 1)" />
            <input type="button" value="2 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 2)" />
            <input type="button" value="3 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 3)" />
            <input type="button" value="4 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 4)" />
            <input type="button" value="5 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 5)" />
            <input type="button" value="6 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 6)" />
            <input type="button" value="7 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 7)" />
            <input type="button" value="8 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 8)" />
            <input type="button" value="9 Bamboo Pair" onclick="addCombinaison('pair', 'bamboo', 9)" />
        </div>
        <div>
            <input type="button" value="1 Character Pair" onclick="addCombinaison('pair', 'character', 1)" />
            <input type="button" value="2 Character Pair" onclick="addCombinaison('pair', 'character', 2)" />
            <input type="button" value="3 Character Pair" onclick="addCombinaison('pair', 'character', 3)" />
            <input type="button" value="4 Character Pair" onclick="addCombinaison('pair', 'character', 4)" />
            <input type="button" value="5 Character Pair" onclick="addCombinaison('pair', 'character', 5)" />
            <input type="button" value="6 Character Pair" onclick="addCombinaison('pair', 'character', 6)" />
            <input type="button" value="7 Character Pair" onclick="addCombinaison('pair', 'character', 7)" />
            <input type="button" value="8 Character Pair" onclick="addCombinaison('pair', 'character', 8)" />
            <input type="button" value="9 Character Pair" onclick="addCombinaison('pair', 'character', 9)" />
        </div>
    </div>
    
    <div style="margin: 10px;"><input type="button" value="Calculate hand points" onclick="refreshHandPoints()" /></div>
    
    <div><b>Your points</b></div>
    <div id="HandPoints" style="border: 1px solid #000; padding: 10px;"></div>

    <script src="src/tile-classes.js"></script>    
    <script src="src/hand-classes.js"></script>
    <script src="src/yakupattern-classes.js"></script>
    <script>
        var combinaisons = [];
        
        function tileFactory(suit, value) {
            var tile = null;
            if (suit === 'dragon') {
                tile = new DragonTile(value);
            } else if (suit === 'wind') {
                tile = new WindTile(value);
            } else if (suit === 'dot') {            
                tile = new DotTile(value);
            } else if (suit === 'bamboo') {
                tile = new BambooTile(value);
            } else if (suit === 'character') {
                tile = new CharacterTile(value);
            } else {
                alert('tile suit not supported');
            }
            return tile;
        }
        
        function addCombinaison(combinaisonType, suit, value) {
            var combinaison;
            if (combinaisonType === 'pair') {
                combinaison = new Pair(tileFactory(suit, value));
            } else if (combinaisonType === 'pon') {
                combinaison = new Pon(tileFactory(suit, value));
            } else if (combinaisonType === 'kan') {
                combinaison = new Kan(tileFactory(suit, value));
            } else if (combinaisonType === 'chii') {
                combinaison = new Chii(
                    tileFactory(suit, value),
                    tileFactory(suit, value+1),
                    tileFactory(suit, value+2)
                );
            } else {
                alert('combinaisonType not supported');
            }
            combinaisons.push(combinaison);
            refreshHandTiles();
        }
        
        function refreshHandTiles() {
            var html = '';
            for (var i = 0; i < combinaisons.length; i++) {
                for (var j = 0; j < combinaisons[i].tiles.length; j++) {
                    var tile = combinaisons[i].tiles[j];
                    if (tile instanceof DragonTile) {
                        html = html + '<span style="display: inline-block">' + tile.color + '<br />' + tile.suit +'</span>';
                    } else if (tile instanceof WindTile) {
                        html = html + '<span style="display: inline-block">' + tile.direction + '<br />' + tile.suit +'</span>';
                    } else {
                        html = html + '<span style="display: inline-block">' + tile.suit + '<br />' + tile.number + '</span>';
                    }
                }
            }
            document.getElementById('HandTiles').innerHTML = html;
        }
        
        function refreshHandPoints() {
            var hand = new Hand(
                combinaisons, 
                document.getElementById('SeatWind').value,
                document.getElementById('PrevalentWind').value
            );
        
            var patterns = [
                { name: 'TanyaouChuu', checker: new TanyaouChuu() },
                { name: 'Honitsu', checker: new Honitsu() },
                { name: 'Chinitsu', checker: new Chinitsu() },
                { name: 'Honroutou', checker: new Honroutou() },
                { name: 'Iipeikou', checker: new Iipeikou() },
                { name: 'SanShokuDoujun', checker: new SanShokuDoujun() },
                { name: 'Itsu', checker: new Itsu() },
                { name: 'Chanta', checker: new Chanta() },
                { name: 'ChiiToitsu', checker: new ChiiToitsu() },
                { name: 'SanShokuDokou', checker: new SanShokuDokou() },
                { name: 'ToiToiHou', checker: new ToiToiHou() },
                { name: 'ShouSangen', checker: new ShouSangen() },
                { name: 'RyanPeikou', checker: new RyanPeikou() },
                { name: 'JunchanTaiyai', checker: new JunchanTaiyai() },
                { name: 'Fanpai (dragon pon)', checker: new FanpaiDragonPon() },
                { name: 'Fanpai (round wind pon)', checker: new FanpaiRoundWind() },
                { name: 'Fanpai (seat wind pon)', checker: new FanpaiSeatWind() }
            ];
            
            var result = [];
            
            for (var i = 0; i < patterns.length; i++) {
                var pattern = patterns[i];
                result.push({ name: pattern.name, value: pattern.checker.check(hand) });
            }
            
            var html = '';
            
            for (var i = 0; i < result.length; i++) {
                html = html + '<div>' + result[i].name + ' : ' + result[i].value + '</div>';
            }
        
            document.getElementById('HandPoints').innerHTML = html;
        }
    </script>
</body>
</html>
