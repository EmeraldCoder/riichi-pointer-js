<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Riichi Mahjong Pointer</title>
</head>
<body>
    <h1>Riichi Mahjong Pointer</h1>

    <div style="margin: 10px;">
        <label>Prevalent wind: </label>
        <select id="PrevalentWind">
            <option value="east">East</option>
            <option value="south">South</option>
            <option value="west">West</option>
            <option value="north">North</option>
        </select>
        
        <label>Seat wind: </label>
        <select id="SeatWind">
            <option value="east">East</option>
            <option value="south">South</option>
            <option value="west">West</option>
            <option value="north">North</option>
        </select>
    </div>

    <div><b>Your hands</b></div>
    <div id="HandTiles" style="border: 1px solid #000; padding: 10px;"></div>

    <div style="margin: 10px;">
        <div>
            <input type="button" value="Red Dragon Pon" onclick="addDragonPon('red')" />
            <input type="button" value="White Dragon Pon" onclick="addDragonPon('white')" />
            <input type="button" value="Green Dragon Pon" onclick="addDragonPon('green')" />
        </div>
        <div>
            <input type="button" value="East Wind Pon" onclick="addWindPon('east')" />
            <input type="button" value="South Wind Pon" onclick="addWindPon('south')" />
            <input type="button" value="West Wind Pon" onclick="addWindPon('west')" />
            <input type="button" value="North Wind Pon" onclick="addWindPon('north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Pon" onclick="addDotPon(1)" />
            <input type="button" value="2 Dot Pon" onclick="addDotPon(2)" />
            <input type="button" value="3 Dot Pon" onclick="addDotPon(3)" />
            <input type="button" value="4 Dot Pon" onclick="addDotPon(4)" />
            <input type="button" value="5 Dot Pon" onclick="addDotPon(5)" />
            <input type="button" value="6 Dot Pon" onclick="addDotPon(6)" />
            <input type="button" value="7 Dot Pon" onclick="addDotPon(7)" />
            <input type="button" value="8 Dot Pon" onclick="addDotPon(8)" />
            <input type="button" value="9 Dot Pon" onclick="addDotPon(9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Pon" onclick="addBambooPon(1)" />
            <input type="button" value="2 Bamboo Pon" onclick="addBambooPon(2)" />
            <input type="button" value="3 Bamboo Pon" onclick="addBambooPon(3)" />
            <input type="button" value="4 Bamboo Pon" onclick="addBambooPon(4)" />
            <input type="button" value="5 Bamboo Pon" onclick="addBambooPon(5)" />
            <input type="button" value="6 Bamboo Pon" onclick="addBambooPon(6)" />
            <input type="button" value="7 Bamboo Pon" onclick="addBambooPon(7)" />
            <input type="button" value="8 Bamboo Pon" onclick="addBambooPon(8)" />
            <input type="button" value="9 Bamboo Pon" onclick="addBambooPon(9)" />
        </div>
        <div>
            <input type="button" value="1 Character Pon" onclick="addCharacterPon(1)" />
            <input type="button" value="2 Character Pon" onclick="addCharacterPon(2)" />
            <input type="button" value="3 Character Pon" onclick="addCharacterPon(3)" />
            <input type="button" value="4 Character Pon" onclick="addCharacterPon(4)" />
            <input type="button" value="5 Character Pon" onclick="addCharacterPon(5)" />
            <input type="button" value="6 Character Pon" onclick="addCharacterPon(6)" />
            <input type="button" value="7 Character Pon" onclick="addCharacterPon(7)" />
            <input type="button" value="8 Character Pon" onclick="addCharacterPon(8)" />
            <input type="button" value="9 Character Pon" onclick="addCharacterPon(9)" />
        </div>
        <div>
            <input type="button" value="Green Dragon Kan" onclick="addDragonKan('green')" />
            <input type="button" value="Red Dragon Kan" onclick="addDragonKan('red')" />
            <input type="button" value="White Dragon Kan" onclick="addDragonKan('white')" />
        </div>
        <div>
            <input type="button" value="East Wind Kan" onclick="addWindKan('east')" />
            <input type="button" value="South Wind Kan" onclick="addWindKan('south')" />
            <input type="button" value="West Wind Kan" onclick="addWindKan('west')" />
            <input type="button" value="North Wind Kan" onclick="addWindKan('north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Kan" onclick="addDotKan(1)" />
            <input type="button" value="2 Dot Kan" onclick="addDotKan(2)" />
            <input type="button" value="3 Dot Kan" onclick="addDotKan(3)" />
            <input type="button" value="4 Dot Kan" onclick="addDotKan(4)" />
            <input type="button" value="5 Dot Kan" onclick="addDotKan(5)" />
            <input type="button" value="6 Dot Kan" onclick="addDotKan(6)" />
            <input type="button" value="7 Dot Kan" onclick="addDotKan(7)" />
            <input type="button" value="8 Dot Kan" onclick="addDotKan(8)" />
            <input type="button" value="9 Dot Kan" onclick="addDotKan(9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Kan" onclick="addBambooKan(1)" />
            <input type="button" value="2 Bamboo Kan" onclick="addBambooKan(2)" />
            <input type="button" value="3 Bamboo Kan" onclick="addBambooKan(3)" />
            <input type="button" value="4 Bamboo Kan" onclick="addBambooKan(4)" />
            <input type="button" value="5 Bamboo Kan" onclick="addBambooKan(5)" />
            <input type="button" value="6 Bamboo Kan" onclick="addBambooKan(6)" />
            <input type="button" value="7 Bamboo Kan" onclick="addBambooKan(7)" />
            <input type="button" value="8 Bamboo Kan" onclick="addBambooKan(8)" />
            <input type="button" value="9 Bamboo Kan" onclick="addBambooKan(9)" />
        </div>
        <div>
            <input type="button" value="1 Character Kan" onclick="addCharacterKan(1)" />
            <input type="button" value="2 Character Kan" onclick="addCharacterKan(2)" />
            <input type="button" value="3 Character Kan" onclick="addCharacterKan(3)" />
            <input type="button" value="4 Character Kan" onclick="addCharacterKan(4)" />
            <input type="button" value="5 Character Kan" onclick="addCharacterKan(5)" />
            <input type="button" value="6 Character Kan" onclick="addCharacterKan(6)" />
            <input type="button" value="7 Character Kan" onclick="addCharacterKan(7)" />
            <input type="button" value="8 Character Kan" onclick="addCharacterKan(8)" />
            <input type="button" value="9 Character Kan" onclick="addCharacterKan(9)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Dot Chii" onclick="addDotChii(1)" />
            <input type="button" value="2,3,4 Dot Chii" onclick="addDotChii(2)" />
            <input type="button" value="3,4,5 Dot Chii" onclick="addDotChii(3)" />
            <input type="button" value="4,5,6 Dot Chii" onclick="addDotChii(4)" />
            <input type="button" value="5,6,7 Dot Chii" onclick="addDotChii(5)" />
            <input type="button" value="6,7,8 Dot Chii" onclick="addDotChii(6)" />
            <input type="button" value="7,8,9 Dot Chii" onclick="addDotChii(7)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Bamboo Chii" onclick="addBambooChii(1)" />
            <input type="button" value="2,3,4 Bamboo Chii" onclick="addBambooChii(2)" />
            <input type="button" value="3,4,5 Bamboo Chii" onclick="addBambooChii(3)" />
            <input type="button" value="4,5,6 Bamboo Chii" onclick="addBambooChii(4)" />
            <input type="button" value="5,6,7 Bamboo Chii" onclick="addBambooChii(5)" />
            <input type="button" value="6,7,8 Bamboo Chii" onclick="addBambooChii(6)" />
            <input type="button" value="7,8,9 Bamboo Chii" onclick="addBambooChii(7)" />
        </div>
        <div>
            <input type="button" value="1,2,3 Character Chii" onclick="addCharacterChii(1)" />
            <input type="button" value="2,3,4 Character Chii" onclick="addCharacterChii(2)" />
            <input type="button" value="3,4,5 Character Chii" onclick="addCharacterChii(3)" />
            <input type="button" value="4,5,6 Character Chii" onclick="addCharacterChii(4)" />
            <input type="button" value="5,6,7 Character Chii" onclick="addCharacterChii(5)" />
            <input type="button" value="6,7,8 Character Chii" onclick="addCharacterChii(6)" />
            <input type="button" value="7,8,9 Character Chii" onclick="addCharacterChii(7)" />
        </div>
        <div>
            <input type="button" value="Green Dragon Pair" onclick="addDragonPair('green')" />
            <input type="button" value="Red Dragon Pair" onclick="addDragonPair('red')" />
            <input type="button" value="White Dragon Pair" onclick="addDragonPair('white')" />
        </div>
        <div>
            <input type="button" value="East Wind Pair" onclick="addWindPair('east')" />
            <input type="button" value="South Wind Pair" onclick="addWindPair('south')" />
            <input type="button" value="West Wind Pair" onclick="addWindPair('west')" />
            <input type="button" value="North Wind Pair" onclick="addWindPair('north')" />
        </div>
        <div>
            <input type="button" value="1 Dot Pair" onclick="addDotPair(1)" />
            <input type="button" value="2 Dot Pair" onclick="addDotPair(2)" />
            <input type="button" value="3 Dot Pair" onclick="addDotPair(3)" />
            <input type="button" value="4 Dot Pair" onclick="addDotPair(4)" />
            <input type="button" value="5 Dot Pair" onclick="addDotPair(5)" />
            <input type="button" value="6 Dot Pair" onclick="addDotPair(6)" />
            <input type="button" value="7 Dot Pair" onclick="addDotPair(7)" />
            <input type="button" value="8 Dot Pair" onclick="addDotPair(8)" />
            <input type="button" value="9 Dot Pair" onclick="addDotPair(9)" />
        </div>
        <div>
            <input type="button" value="1 Bamboo Pair" onclick="addBambooPair(1)" />
            <input type="button" value="2 Bamboo Pair" onclick="addBambooPair(2)" />
            <input type="button" value="3 Bamboo Pair" onclick="addBambooPair(3)" />
            <input type="button" value="4 Bamboo Pair" onclick="addBambooPair(4)" />
            <input type="button" value="5 Bamboo Pair" onclick="addBambooPair(5)" />
            <input type="button" value="6 Bamboo Pair" onclick="addBambooPair(6)" />
            <input type="button" value="7 Bamboo Pair" onclick="addBambooPair(7)" />
            <input type="button" value="8 Bamboo Pair" onclick="addBambooPair(8)" />
            <input type="button" value="9 Bamboo Pair" onclick="addBambooPair(9)" />
        </div>
        <div>
            <input type="button" value="1 Character Pair" onclick="addCharacterPair(1)" />
            <input type="button" value="2 Character Pair" onclick="addCharacterPair(2)" />
            <input type="button" value="3 Character Pair" onclick="addCharacterPair(3)" />
            <input type="button" value="4 Character Pair" onclick="addCharacterPair(4)" />
            <input type="button" value="5 Character Pair" onclick="addCharacterPair(5)" />
            <input type="button" value="6 Character Pair" onclick="addCharacterPair(6)" />
            <input type="button" value="7 Character Pair" onclick="addCharacterPair(7)" />
            <input type="button" value="8 Character Pair" onclick="addCharacterPair(8)" />
            <input type="button" value="9 Character Pair" onclick="addCharacterPair(9)" />
        </div>
    </div>
    
    <div style="margin: 10px;"><input type="button" value="Calculate hand points" onclick="refreshHandPoints()" /></div>
    
    <div><b>Your points</b></div>
    <div id="HandPoints" style="border: 1px solid #000; padding: 10px;"></div>

    <script src="src/tile-classes.js"></script>    
    <script src="src/hand-classes.js"></script>
    <script src="src/yakupattern-classes.js"></script>
    <script>
        var hand = new Hand([], 'east', 'east');

        function addDragonPon(color) {
            var pon = new Pon(new DragonTile(color));
            hand.combinaisons.push(pon);
            refreshHandTiles();
        }
        
        function addWindPon(direction) {
            var pon = new Pon(new WindTile(direction));
            hand.combinaisons.push(pon);
            refreshHandTiles();
        }
        
        function addDotPon(number) {
            var pon = new Pon(new DotTile(number));
            hand.combinaisons.push(pon);
            refreshHandTiles();
        }
        
        function addBambooPon(number) {
            var pon = new Pon(new BambooTile(number));
            hand.combinaisons.push(pon);
            refreshHandTiles();
        }
        
        function addDragonKan(color) {
            var kan = new Kan(new DragonTile(color));
            hand.combinaisons.push(kan);
            refreshHandTiles();
        }
        
        function addWindKan(direction) {
            var kan = new Kan(new WindTile(direction));
            hand.combinaisons.push(kan);
            refreshHandTiles();
        }
        
        function addDotKan(number) {
            var kan = new Kan(new DotTile(number));
            hand.combinaisons.push(kan);
            refreshHandTiles();
        }
        
        function addBambooKan(number) {
            var kan = new Kan(new BambooTile(number));
            hand.combinaisons.push(kan);
            refreshHandTiles();
        }
        
        function addCharacterKan(number) {
            var kan = new Kan(new CharacterTile(number));
            hand.combinaisons.push(kan);
            refreshHandTiles();
        }
        
        function addDotChii(startNumber) {
            var chii = new Chii(new DotTile(startNumber), new DotTile(startNumber+1), new DotTile(startNumber+2));
            hand.combinaisons.push(chii);
            refreshHandTiles();
        }
        
        function addBambooChii(startNumber) {
            var chii = new Chii(new BambooTile(startNumber), new BambooTile(startNumber+1), new BambooTile(startNumber+2));
            hand.combinaisons.push(chii);
            refreshHandTiles();
        }
        
        function addCharacterChii(startNumber) {
            var chii = new Chii(new CharacterTile(startNumber), new CharacterTile(startNumber+1), new CharacterTile(startNumber+2));
            hand.combinaisons.push(chii);
            refreshHandTiles();
        }
        
        function addCharacterPon(number) {
            var pon = new Pon(new CharacterTile(number));
            hand.combinaisons.push(pon);
            refreshHandTiles();
        }
        
        function addDragonPair(color) {
            var pair = new Pair(new DragonTile(color));
            hand.combinaisons.push(pair);
            refreshHandTiles();
        }
        
        function addWindPair(direction) {
            var pair = new Pair(new WindTile(direction));
            hand.combinaisons.push(pair);
            refreshHandTiles();
        }
        
        function addDotPair(number) {
            var pair = new Pair(new DotTile(number));
            hand.combinaisons.push(pair);
            refreshHandTiles();
        }
        
        function addBambooPair(number) {
            var pair = new Pair(new BambooTile(number));
            hand.combinaisons.push(pair);
            refreshHandTiles();
        }
        
        function addCharacterPair(number) {
            var pair = new Pair(new CharacterTile(number));
            hand.combinaisons.push(pair);
            refreshHandTiles();
        }
        
        function refreshHandTiles() {
            var html = '';
            for (var i = 0; i < hand.combinaisons.length; i++) {
                for (var j = 0; j < hand.combinaisons[i].tiles.length; j++) {
                    var tile = hand.combinaisons[i].tiles[j];
                    if (tile instanceof DragonTile) {
                        html = html + '<span style="display: inline-block">' + tile.color + '<br />' + tile.suit +'</span>';
                    } else if (tile instanceof WindTile) {
                        html = html + '<span style="display: inline-block">' + tile.direction + '<br />' + tile.suit +'</span>';
                    } else {
                        html = html + '<span style="display: inline-block">' + tile.suit + '<br />' + tile.number + '</span>';
                    }
                }
            }
            document.getElementById('HandTiles').innerHTML = html;
        }
        
        function refreshHandPoints() {
            var patterns = [
                { name: 'TanyaouChuu', checker: new TanyaouChuu() },
                { name: 'Honitsu', checker: new Honitsu() },
                { name: 'Chinitsu', checker: new Chinitsu() },
                { name: 'Honroutou', checker: new Honroutou() },
                { name: 'Iipeikou', checker: new Iipeikou() },
                { name: 'SanShokuDoujun', checker: new SanShokuDoujun() },
                { name: 'Itsu', checker: new Itsu() },
                { name: 'Chanta', checker: new Chanta() },
                { name: 'ChiiToitsu', checker: new ChiiToitsu() },
                { name: 'SanShokuDokou', checker: new SanShokuDokou() },
                { name: 'ToiToiHou', checker: new ToiToiHou() },
                { name: 'ShouSangen', checker: new ShouSangen() },
                { name: 'RyanPeikou', checker: new RyanPeikou() },
                { name: 'JunchanTaiyai', checker: new JunchanTaiyai() },
                { name: 'Fanpai (dragon pon)', checker: new FanpaiDragonPon() },
                { name: 'Fanpai (round wind pon)', checker: new FanpaiRoundWind() },
                { name: 'Fanpai (seat wind pon)', checker: new FanpaiSeatWind() }
            ];
            
            var result = [];
            
            for (var i = 0; i < patterns.length; i++) {
                var pattern = patterns[i];
                result.push({ name: pattern.name, value: pattern.checker.check(hand) });
            }
            
            var html = '';
            
            for (var i = 0; i < result.length; i++) {
                html = html + '<div>' + result[i].name + ' : ' + result[i].value + '</div>';
            }
        
            document.getElementById('HandPoints').innerHTML = html;
        }
    </script>
</body>
</html>
